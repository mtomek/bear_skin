{%
  set config = {
    'wrapper': {
      'element': node_wrapper.element ?: 'article',
      'classes': (node_wrapper.classes ?: [])|merge([
        node.isPromoted() ? 'node--promoted',
        node.isSticky() ? 'node--sticky',
        not node.isPublished() ? 'node--unpublished',
        view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
      ]),
      'attributes': node_wrapper.attributes ?: {},
    },
    'label': {
      'element': node_label.element ?: 'h2',
      'display': node_label.display ?: not page,
      'link': node_label.link is defined ? node_label.link : true,
      'classes': (node_label.classes ?: [])|merge([
        'node__title',
        'node--' ~ node.bundle|clean_class ~ '__title',
      ]),
      'attributes': node_label.attributes ?: {},
    },
    'author': {
      'element': node_author.element ?: 'footer',
      'display': node_author.display is defined ? node_author.display : display_submitted,
      'classes': (node_author.classes ?: [])|merge([
        'node__author-info',
        'node--' ~ node.bundle|clean_class ~ '__author-info',
      ]),
      'attributes': node_author.attributes ?: {},
    },
    'content': {
      'element': node_content.element ?: 'div',
      'classes': (node_content.classes ?: [])|merge([
        'node__content',
        'node--' ~ node.bundle|clean_class ~ '__content'
      ]),
      'attributes': node_content.attributes ?: {},
    },
  }
%}

{# Configure Attributes #}
{% for key, value in config.wrapper.attributes %}
  {% set attributes = attributes.setAttribute(key, value) %}
{% endfor %}

{% for key, value in config.label.attributes %}
  {% set title_attributes = title_attributes.setAttribute(key, value) %}
{% endfor %}

{% for key, value in config.author.attributes %}
  {% set author_attributes = author_attributes.setAttribute(key, value) %}
{% endfor %}

{% for key, value in config.content.attributes %}
  {% set content_attributes = content_attributes.setAttribute(key, value) %}
{% endfor %}

<{{ config.wrapper.element }}{{ attributes.addClass(config.wrapper.classes) }}>

  {{ title_prefix }}
  {% block label %}
    {% if config.label.display %}
      <{{ config.label.element }}{{ title_attributes.addClass(config.label.classes) }}>
        {% if config.label.link %}
        <a href="{{ url }}" rel="bookmark">
        {% endif %}
          {{ label }}
        {% if config.label.link %}
        </a>
        {% endif %}
      </{{ config.label.element }}>
    {% endif %}
  {% endblock %}
  {{ title_suffix }}

  {% if config.author.display %}
    {% block author_info %}
      <{{ config.author.element }}{{ author_attributes.addClass(config.author.classes) }}>
        {{ author_picture }}
        <div class="node__author-inner">
          {% trans %}Submitted by {{ author_name }} on {{ date }}{% endtrans %}
          {{ metadata }}
        </div>
      </{{ config.author.element }}>
    {% endblock %}
  {% endif %}

  {% block content %}
    <{{ config.content.element }}{{ content_attributes.addClass(config.content.classes) }}>
      {{ content }}
    </{{ config.content.element }}>
  {% endblock %}

</{{ config.wrapper.element }}>
